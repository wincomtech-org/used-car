<!DOCTYPE html>
<html lang="en">
<head>
    <title>卖家中心 - {$site_info.site_name|default=''}</title>
    <meta name="keywords" content="{$site_info.site_seo_keywords|default=''}"/>
    <meta name="description" content="{$site_info.site_seo_description|default=''}">

    <include file="public@head"/>

    <style type="text/css">
        .pic-list li { margin-bottom: 5px;}
    </style>
    <script type="text/html" id="photos-item-tpl">
        <li id="saved-image{id}">
            <input id="photo-{id}" type="hidden" name="photo[urls][]" value="{filepath}">
            <img id="photo-{id}-preview" src="{url}" style="height:108px;width:180px;"
                 onclick="imagePreviewDialog(this.src);">
            <a href="javascript:uploadOneImage('图片上传','#photo-{id}');">替换</a>
            <a href="javascript:(function(){$('#saved-image{id}').remove();})();">移除</a>
            <input class="form-control" id="photo-{id}-name" type="text" name="photo[names][]" value="{name}"
                    title="图片名称">
        </li>
    </script>
</head>
<body>
    <!-- 头部 -->
    <include file="public@header" />
    <!-- 导航 -->
    <include file="public@nav" />

    <!-- 卖家中心 -->
    <section class="person">
        <div class="main">
            <include file="public@usernav" />

            <div class="person_right">
                <div class="person_right_tit">
                    <include file="seller/nav" />
                </div>
                <div class="person_right_con">
                    <div class="info_tit">车损图片</div>
                    <div class="out-scroll">
                        <ul class="info_detail_list jiance-con" style="width:100%;">
                        <div class="car-appearance-con out1">
                            <div class="car-appearance-left" id='car-appearance-left'></div>
                            <!-- 缺陷图 -->
                            <div class="appearance-det" style='top:30px;left:380px;'>
                                <i class='appear-point'></i>
                                <div class="appear-mat" style="display:none;">
                                    <div class="appear-ct">
                                        <p>剐蹭</p>
                                        <div class="appear-pic " onClick="javascript:parent.imagePreviewDialog('{//:cmf_get_image_preview_url($vo.url)}')">
                                            <img src="__TMPL__/public/assets/images/example/car03.jpg" alt="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="car-appearance-con-show">
                                <ul>
                                    <!-- <li class='car-appearance-li'>
                                        <dl>
                                            <dt>坐标：</dt>
                                            <dd class='position-show' style="margin-right:5px;"> 
                                            
                                                <input type="text" name="position-x" value=''>
                                                <input type="text" name="position-y" value=''>
                                            </dd>
                                            
                                            <dd>
                                                <a href="javascript:uploadOneImage('图片上传','#driving_license1');" class="demonstrate_pre">
                                                    <if condition="empty($verifyinfo.more.driving_license)">
                                                        <img src="__TMPL__/public/assets/images/add.png" id="driving_license1-preview"  style="cursor: pointer;max-width:200px"/>
                                                    <else/>
                                                        <img src="__TMPL__/public/assets/images/add.png" id="driving_license1-preview" height="40px" style="cursor: pointer"/>
                                                    </if>
                                                    <i class="photo_tip">请上传缺陷图</i>
                                                </a>
                                            </dd>
                                            <dd>
                                                <a href="javascript:void(0)" class='remove-img-btn'>删除</a>
                                            </dd>
                                        </dl>
                                    </li> -->
                                </ul>
                            </div>
                        </div>
                    </ul>
                    </div>
                    
                </div>
            </div>

        </div>
    </section>
    <script>
            // 后台增加缺陷图
            var x=1;
            $('.car-appearance-left').click(function (e) {
                e = e || window.event;
                var imgId = '#' + $(e.target).attr('id');
                var offsetX = e.pageX - $(imgId).offset().left;
                var offsetY = e.pageY - $(imgId).offset().top;
                
                x++;
                console.log(x)
                
                var str = '<div class="appearance-det" style="top:' + offsetY + 'px;left:' + offsetX + 'px">' +
                    '<i class="appear-point"></i>' +
                    '<div class="appear-mat"' + 'style="display:none;"' + '>' +
                    '<div class="appear-ct">' +
                    '<p>剐蹭</p>' +
                    '<div class="appear-pic">' +
                    '<img src="__TMPL__/public/assets/images/example/car03.jpg" alt="">' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    ' </div>';
        
                // 卖家中心增加沦陷图
                var str2="<li class='car-appearance-li'>"+
                            " <dl>"+
                                "<dt>坐标：</dt>"+
                                "<dd class='position-show' style='margin-right:5px;'>"+ 
                                
                                    "<input type='text' name='position-x' value='"+offsetX +"'>"+
                                    "<input type='text' name='position-y' value='"+offsetY +"'>"+
                                "</dd>"+
                                " <dd>"+
                                    '<a href="javascript:uploadOneImage('+" '图片上传'," + "'#driving_license"+x+"')"+'"'+' class="demonstrate_pre">'+
                               
                                            '<img src="__TMPL__/public/assets/images/add.png" id="driving_license'+x+'-preview"' +' style="cursor: pointer;width:40px"/>'+
                                       
                                        '<i class="photo_tip">请上传缺陷图</i>'+
                                    '</a>'+
                                '</dd>'+
                                '<dd>'+
                                    '<a class="remove-img-btn">删除</a>'+
                                '</dd>'+
                            '</dl>'+
                        '</li>'
                $(this).after(str);
                $('.car-appearance-con-show').append(str2)
            })
        
            if ($(window).width() > 1199) {
                $('.appearance-det').hover(function () {
                    $(this).find('.appear-mat').css('display', 'block')
                }, function () {
                    $(this).find('.appear-mat').css('display', 'none')
                })
            } else {
                $('.appearance-det').click(function () {
        
                    var x=$('.appearance-det').css('left').split('px')[0];
                    console.log(x)
                    if(x>250){
                        alert(12)
                        $(this).find('.appear-ct').css('right','0')
                    }
                    $('.appear-mat').css('display', 'none')
                    $(this).find('.appear-mat').css('display', 'block')
                })
            }
        
            // 删除
            $('.car-appearance-con-show').delegate('.remove-img-btn','click',function(){
                $(this).parents('.car-appearance-li').remove();
            })
        </script>
</body>
</html>

